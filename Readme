# HermesX 0.3.0 版本重點（基底：Meshtastic 2.7.15）

## 版本標記
- 基底同步 Meshtastic 2.7.15（含新版 device-ui 與繪圖管線）。
- App 回報版本永遠使用 Meshtastic 官方格式/ID（APP_VERSION / APP_VERSION_SHORT 保持官方），僅螢幕顯示標註 HXB_0.3.0。
- 螢幕顯示為 HXB_0.3.0。

## 功能/行為
- Lighthouse 預設停用（`MESHTASTIC_EXCLUDE_LIGHTHOUSE=1`），避免不必要的廣播負載。
- 罐頭訊息 UX 維持 HermesX 優化：
  - 自動加入 `Cancel` 退出選項。
  - 選單內長按主鍵約 1 秒即可退出，無需雙擊。
  - 收到 ACK/NACK 不強制搶焦彈窗。
- ACK/NACK 聲光：僅在等待自己送出的文字訊息且 request_id/封包 id 匹配時觸發，避免設定/系統封包誤報。

## 2.7.15 UI 同步
- 引入官方 2.7.15 的 UI/繪圖更新：新的 device-ui 套件與 Shared UI 管線（`SharedUIDisplay`、`ScreenGlobals`、`TimeFormatters`、`graphics/draw/`、`graphics/emotes` 等）。
- E-ink / TFT / SDL 面板支援隨 2.7.15 更新，InkHUD 與驅動器版本對齊。

## 延續
- 集中式 LED 管理、TAK 角色靜默、EM/SAFE 行為延續自 0.2.8。

## 開機畫面
- 雙頁啟動畫面：先顯示 Meshtastic 官方頁，再顯示 HermesX 頁，各約 1 秒（`logo_timeout=2000ms` 拆成兩半），邏輯在 `src/graphics/Screen.cpp`。
- 若要調整時長或觀察實際秒數，可查看 `INFO [Screen] Boot splash timing started / Switching to HermesX boot screen / Done with boot screen` 日誌，或參考 `docs/ISSUE_boot_splash_timing.md` 追蹤歷史。

## 與 2.6.11 最大差異與事件
- 官方 2.7.15 共享 UI 對彩色面板以觸控為主，EC11 長按不再預設關機：已強制保留 Rotary/CannedMessage 輸入，EC11 長按改送 `INPUT_BROKER_SHUTDOWN`，並恢復長按逐格＋關機動畫；長按門檻調為 5 秒、關機延遲 1.2 秒以完成動畫。
- 深睡喚醒改用 GPIO4 ext1：需按住約 2 秒才算有效；若未達門檻或中途放手，立即回深睡並等待放開，避免每秒抖動喚醒。預設低態觸發並上拉，可用 `HERMESX_WAKE_GPIO` / `HERMESX_WAKE_ACTIVE_LOW` 調整腳位與極性。
